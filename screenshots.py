from skimage.measure import compare_ssim as ssim
from selenium.webdriver.firefox.firefox_binary import FirefoxBinary
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities
from selenium import webdriver
import time

urls = ["https://serve.popads.net", "http://www.morar-research.com", "https://www.twitch.tv", "http://vapi.intapi.com", "https://web.roblox.com", "https://zambeel.lums.edu.pk", "https://ww2.unipark.de", "https://imgur.com", "https://www.ouac.on.ca", "https://sports.betway.com", "https://smores.tv", "https://crowdini.com", "http://kr.battle.net", "https://www.google.pt", "https://www.pscp.tv", "https://pbs.twimg.com", "https://communicatehealth.app.box.com", "https://websurvey2.opinionbar.com", "https://www.google.nl", "https://populuslive.online-host.solutions", "https://www.diki.pl", "http://www.swagbucks.com", "https://deloton.com", "https://www.sythe.org", "https://smile.amazon.com", "https://genius.com", "https://scrap.tf", "http://survey18.toluna.com", "https://web.whatsapp.com", "http://ns10.askia.com", "http://www.samplicio.us", "http://survey.vipvoice.com", "http://rs.n1info.com", "https://login.yahoo.com", "http://luthresearch.decipherinc.com", "https://desuarchive.org", "https://www.aliexpress.com", "https://www.facebook.com", "https://plus.google.com", "http://twistity.com", "http://math.lums.edu.pk", "https://www.samplicio.us", "http://imgur.com", "http://www.myfitnesspal.com", "http://mineatlas.com", "http://survey.confirmit.com", "https://surveys.globaltestmarket.com", "https://www.mmo-champion.com", "https://connect.secure.wellsfargo.com", "http://cdn1.twistity.com", "https://www.segundamano.mx", "https://allegro.pl", "https://www.ilfattoquotidiano.it", "http://sports.williamhill.com", "https://es.tviso.com", "http://deloton.com", "https://pl.wikipedia.org", "https://www.google.com.mx", "https://www.forbes.com", "https://www1.surveys.gfk.com", "http://www.asos.com", "http://dkr1.ssisurveys.com", "https://calendar.google.com", "https://communicatehlth.teamwork.com", "https://www.soscisurvey.de", "https://exhentai.org", "http://s1.zetaboards.com", "https://www.tapresearch.com", "http://kissanime.ru", "https://www.google.de", "https://www.youtube.com", "http://www.rts.ch", "https://www.mathworks.com", "https://www.valuedopinions.co.uk", "https://surveys.ipsosinteractive.com", "https://www.buzzfeed.com", "https://www.wikiwand.com", "http://myfreebtc.net", "https://www.surveyjunkie.com", "https://offerwall.minutecircuit.com", "http://survey-d.researchnow.com", "https://www.vox.com", "https://www.ebay.com", "https://streamable.com", "https://mangadex.com", "http://survey.us.confirmit.com", "https://s1.intellisurvey.com", "https://survey18.harrisinteractive.eu", "https://wustl.blackboard.com", "https://online.ssisurveys.com", "https://yesmovies.to", "https://www.surveygizmo.com", "http://lootup.tv", "http://www.businessinsider.com", "https://na2se.voxco.com", "http://www.geniabusiness.com", "https://robinhood.com", "https://www.gearbest.com", "http://search.swagbucks.com", "https://mangadex.org", "http://www.tvglee.tv", "https://mail.google.com", "https://members.onepoll.com", "http://www.clicksaudit.com", "https://offbeat.topix.net", "https://wordpress.com", "https://outlook.office.com", "http://adserver.entertainow.com", "https://m.skybet.com", "http://liquipedia.net", "https://mobile.twitter.com", "http://www.greydogsoftware.com", "http://toreba.net", "https://apply.commonapp.org", "https://quizlet.com", "https://fenix.tecnico.ulisboa.pt", "https://projects.fivethirtyeight.com", "https://tweetdeck.twitter.com", "https://www.google.es", "http://engageme.tv", "http://www.record.pt", "https://play.google.com", "https://secure05c.chase.com", "https://secureus114.sgcpanel.com:2096", "https://duckduckgo.com", "https://worker.mturk.com", "https://today.yougov.com", "http://www.filmweb.pl", "http://soc.decipherinc.com", "http://triin.vallner.eu", "https://finaid.lums.edu.pk", "https://prolific.ac", "https://bato.to", "https://www.surveysavvy.com", "https://www.predictit.org", "https://t.co", "https://www.google.com.br", "https://translate.google.com", "https://lichess.org", "https://secure.bankofamerica.com", "https://mingle.respondi.com", "https://www.quora.com", "https://profile.collegeboard.org", "https://survey.euro.confirmit.com", "http://www2.hm.com", "https://www.realself.com", "https://console.cloud.google.com", "https://photos.google.com", "http://survey3.greenpanthera.com", "http://go.bistroapi.com", "http://surveys.system1research.com", "https://docs.google.com", "https://atrl.net", "https://www.surveymonkey.com", "http://ae.decipherinc.com", "https://lrccd.instructure.com", "https://tax.creditkarma.com", "http://koinme.com", "http://www.redwallwarlords.com", "https://strategy.opinionconnect.com", "https://www.sportchek.ca", "http://cdn1.bet.com", "https://fellow.pl", "http://www.mangareader.net", "http://www.neobux.com", "https://www.google.it", "https://slickdeals.net", "https://mail.yahoo.com", "https://www.udemy.com", "https://www.google.com.pk", "https://surveys.harrisinsights.com", "https://moodle-courses1718.wolfware.ncsu.edu", "https://www.prolific.ac", "https://workplace.clickworker.com", "https://www.daraz.pk", "http://www.thesaurus.com", "http://www.joker.si", "https://thepiratebay.org", "https://www.creditkarma.com", "https://www.edjoin.org", "https://www.binance.com", "https://www.google.cl", "https://translate.google.pl", "https://www.google.fi", "http://www.espncricinfo.com", "https://trello.com", "https://www.google.com", "https://www.washingtonpost.com", "https://schlesinger.focusvision.com", "https://tv2go.t-2.net", "https://clips.twitch.tv", "https://r.mintvine.com", "https://cm.netteller.com", "http://thepanelstation.com", "http://www.earthempires.com", "http://i.imgur.com", "https://www.amazon.es", "https://www.globaltestmarket.com", "https://eu.battle.net", "http://oldschoolrunescape.wikia.com", "http://www.webassign.net", "https://www.hotukdeals.com", "https://freebitco.in", "https://www.futbin.com", "https://123movieshub.to", "https://www.haarprodukte.ch", "https://sports.yahoo.com", "https://mg.mail.yahoo.com", "https://papers.gceguide.com", "https://www.evernote.com", "https://www.fflogs.com", "http://www.peanutlabs.com", "http://94.102.148.250", "https://universityofmanitoba.desire2learn.com", "https://talentcentral.cebglobal.com", "https://www.amazon.it", "https://accounts.google.com", "https://www.healthline.com", "https://gr.yahoo.com", "https://work.crowdsurfwork.com", "https://www.google.fr", "https://www.neobux.com", "https://www.messenger.com", "https://chrome.google.com", "https://outlook.office365.com", "https://mapcreator.here.com", "https://piazza.com", "https://turkopticon.ucsd.edu", "http://dlink.peanutlabs.com", "https://www.sephora.com", "https://brainfriend.slack.com", "https://login.microsoftonline.com", "http://activities.mysurvey.com", "http://store.steampowered.com", "http://kissmanga.com", "https://twitter.com", "https://hiaa.decipherinc.com", "https://www.indeed.com", "https://l.facebook.com", "https://survey-d.researchnow.com", "https://terraria.gamepedia.com", "http://www.ikea.com", "https://www.google.cz", "http://survey.euro.confirmit.com", "http://ipe4.libratus.edu.pl", "https://www.google.ca", "https://www.panelbase.net", "https://uk.focusvision.com", "https://www.google.gr", "https://github.com", "https://www.pinterest.com", "https://www.webassign.net", "https://app.spare5.com", "https://forum.mobilism.org", "http://it.mysurvey.com", "https://translate.google.es", "https://soundcloud.com", "https://onedrive.live.com", "https://www.nhl.com", "http://game.granbluefantasy.jp", "https://www.indeed.co.uk", "https://czateria.interia.pl", "https://csr.ebay.ca", "http://www.next.co.uk", "http://survey.researchresults.com", "https://nl.wikipedia.org", "http://perk.tv", "https://en.wikipedia.org", "https://lms.lums.edu.pk", "http://www.ign.com", "http://www.imdb.com", "https://mega.nz", "https://www.wykop.pl", "http://www.spidermetrix.com", "http://poczta.wp.pl", "https://www.google.pl", "https://backpack.tf", "http://www.bbc.co.uk", "https://www.coinbase.com", "https://post.craigslist.org", "https://www.namingforce.com", "https://drive.google.com", "http://www.dumpert.nl", "http://www.soldissimi.it", "http://surveys2.newvistalive.com", "https://minds.testable.org", "http://tvtropes.org", "https://surveys.automatesurvey.com", "https://www.amazon.co.uk", "http://psdkeys.com", "http://www.surveygizmo.com", "https://youtu.be", "https://www.mturk.com", "https://bmovies.is", "https://www.office.com", "https://app.asana.com", "https://www.usertesting.com", "http://www.elmundo.es", "https://my.pureprofile.com", "http://www.rrdiscovery.com", "http://bilendi.decipherinc.com", "https://ebanking.eurobank.gr", "https://www.wunderground.com", "https://www.zara.com", "https://www.aesop.com", "https://connect.ucern.com", "https://www.your-surveys.com", "https://www.ebay.co.uk", "https://app.prolific.ac", "https://tools.usps.com", "https://www.tripadvisor.com", "https://www.freshstep.com", "https://usf.catalog.fcla.edu", "http://surveymyopinion.researchnow.com", "https://survey7.jdpoweronline.com", "https://explore10.com", "https://myaccount.google.com", "http://suziesfood.kymainteractive.com", "https://i.imgur.com", "https://surveys.gobranded.com", "https://app.respondent.io", "https://www.theguardian.com", "https://account.microsoft.com", "http://survey-ca.researchnow.com", "https://discordapp.com", "http://www.isuresults.com", "https://www.yahoo.com", "https://login.live.com", "https://www.reddit.com", "https://i.redd.it", "https://www.cint.com", "https://www.paypal.com", "https://cdn.pornpics.com", "http://typeaway.net", "http://ver.movistarplus.es", "http://viaresearch.3uu.eu", "https://plug.dj", "http://www.globaltestmarket.com", "https://stackoverflow.com", "https://www.instagc.com", "https://www.ownedcore.com", "https://otscans.com", "https://www.zillow.com", "https://www.kondomishop.fi", "http://myview.researchbods.com", "https://www.amazon.com", "https://www.hltv.org", "https://usosweb.umcs.pl", "https://www.google.be", "https://steamcommunity.com", "http://go.3bluemedia.com", "https://open.spotify.com", "https://www.google.si", "https://aulavirtual.um.es", "https://www.betfair.com", "https://www.msn.com", "https://edgeapi.innovatemr.net", "https://mail.protonmail.com", "https://www.linkedin.com", "http://emea.focusvision.com", "http://my.ebay.com", "https://www.deviantart.com", "https://nielsenwebsurveys.com", "https://www.datezone.com", "https://plugin.opinionsample.com", "https://www.google.ge", "https://www.bing.com", "https://translate.google.it", "http://www.sport-fm.gr", "https://www.walmart.com", "https://surveyhub.globaltestmarket.com", "https://www.sample-cube.com", "https://luthresearch.decipherinc.com", "https://nsat.collegeboard.org", "https://microworkers.com", "http://steamcommunity.com", "http://e-liquid-recipes.com", "https://www.instagram.com", "https://social.i-say.com", "https://gfycat.com", "https://earn.com", "https://www.raise.com", "http://www.pimkie.fr", "https://www.amazon.ca", "https://web.facebook.com", "https://paidviewpoint.com", "https://www.google.ch", "http://www.futhead.com", "http://sigma.lums.edu.pk", "https://opinione.net", "https://www.guadagna.net", "https://osbot.org", "https://m.facebook.com", "https://ffxiv.gamerescape.com", "https://www.tnsonline.pl", "https://www.torn.com", "https://adserver.entertainow.com", "https://it.toluna.com", "https://www.globus.ch", "https://www.khanacademy.org", "http://www.rightmove.co.uk", "http://www.teamliquid.net", "https://www.microsoft.com", "https://www.etsy.com", "https://encrypted.google.com", "https://web.telegram.org", "https://www.translate.com", "https://gamefaqs.gamespot.com", "https://outlook.live.com", "https://s.cint.com", "https://gbf.wiki", "http://survey2.voicefive.com", "https://earnably.com", "https://www.coursera.org", "http://bestadbid.com", "http://www.360daily.com", "https://ezra.research.cornell.edu", "https://web70.gfk.com", "https://www.google.co.uk", 'https://moodle.cs.colorado.edu', 'http://pincub.com', 'https://paypal.promo.eprize.com', 'https://www.888sport.com', 'https://www.vudu.com', 'https://fantasy.premierleague.com', 'https://g4-us.yougov.com', 'https://www.eyebuydirect.com', 'http://survey.vi.ga', 'http://www.hollandsentinel.com', 'https://www.mussler-beautynet.de', 'https://ereader.chegg.com', 'https://data-collector.zappistore.com', 'https://finance.yahoo.com', 'https://www.iseg.ulisboa.pt', 'https://my.mit.edu', 'https://www.familysearch.org', 'https://www.stockpile.com', 'https://s-dri.com', 'https://www.cars.com', 'https://www.zalando.co.uk', 'https://freepostcodelottery.com', 'http://www.bbc.com', 'http://leifos.pythonanywhere.com', 'https://store.playstation.com', 'https://www.redbubble.com', 'https://dkr1.ssisurveys.com', 'http://pilot.scc.losrios.edu', 'https://super.walmart.com.mx', 'http://panelistas.ikerfelonline.com', 'https://www.chrono.gg', 'https://wiki.ucern.com', 'https://payments.amazon.com', 'https://www.viralriff.com', 'https://zattoo.com', 'http://www.espn.com', 'https://mx.toluna.com', 'https://www.research.net', 'http://www.iqsn.de', 'https://portal.research.cornell.edu', 'http://ffxiv.ariyala.com', 'https://partner.engageme.tv', 'https://kotaku.com', 'https://lumun.lums.edu.pk', 'http://antyweb.pl', 'http://pro.magnumphotos.com', 'https://www.rei.com', 'https://www.euromediaresearch.it', 'https://games.bet365.com', 'https://www.kayak.com', 'http://services.runescape.com', 'https://myaccounts.capitalone.com', 'https://it.beruby.com', 'https://medium.com', 'http://www.epicmuseum.com', 'https://gr.toluna.com', 'https://www.google.ee', 'https://www.swagbucks.com', 'http://www.citethisforme.com', 'https://global.americanexpress.com', 'http://www.kfapfakes.com', 'https://www.rev.com', 'https://learn2.open.ac.uk', 'https://livelancsac-my.sharepoint.com', 'https://creailtuogusto.com', 'https://www.bet.com', 'https://beep.metid.polimi.it', 'https://www.vogue.com', 'https://verified.capitalone.com', 'https://yougov.co.uk', 'https://tasty.co', 'https://www.thomann.de', 'https://www.psytoolkit.org', 'https://www.bbc.co.uk', 'https://playfulbet.com', 'http://www.pictame.com', 'https://www.cnyfertilitycenters.com', 'https://uk.yahoo.com']


# websites = [
# 			 "http://yasirzaki.net",
# 		]

def screenshotSimplified (w):
	firefoxOptions = webdriver.FirefoxOptions()
	firefoxOptions.set_headless()

	firefoxProfile = webdriver.FirefoxProfile()
	
	firefoxProfile.add_extension(extension='./JSCleanerPlugin@1.0')
	
	firefoxProfile.set_preference("browser.cache.disk.enable", False)
	firefoxProfile.set_preference("browser.cache.memory.enable", False)

	driver = webdriver.Firefox(
		executable_path='./geckodriver', 
		firefox_profile=firefoxProfile, 
		firefox_options=firefoxOptions,
		)

	w1 = w
	
	fn1 = "original-"+str(w1)+".png"
	fn1 = fn1.replace("https://", "").replace("http://", "").replace("/", "-")
	fn2 = "simplified-"+str(w1)+".png"
	fn2 = fn2.replace("https://", "").replace("http://", "").replace("/", "-")
	fn1 = "./ss/"+fn1
	fn2 = "./ss/"+fn2

	driver.get(w1)
	time.sleep(2)
	S = lambda X: driver.execute_script('return document.body.parentNode.scroll'+X)
	driver.set_window_size(S('Width'),S('Height'))                                                                                                               
	time.sleep(2)
	driver.find_element_by_tag_name('body').screenshot(fn1)


	driver.get(w1)
	time.sleep(2)
	S = lambda X: driver.execute_script('return document.body.parentNode.scroll'+X)
	driver.set_window_size(S('Width'),S('Height'))                                                                                                         
	time.sleep(2)
	driver.find_element_by_tag_name('body').screenshot(fn2)

	driver.quit()

print("total: ", len(urls))
for c, w in enumerate(urls):
	if c <= 90: continue
	try:
		screenshotSimplified(w)
		print(c, " completed.", w)
	except:
		print(w, " failed")

# for w in websites:
# 	screenshotOriginal(w)